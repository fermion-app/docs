---
title: 'Embedding live session externally'
icon: earth-americas
sidebarTitle: 'External embed'
description: 'Learn about embedding live sessions externally and customizing the look and feel for them'
---

This guide will introduce you to the ability for embedding Fermion live sessions into external websites using the Fermion SDK, or manual iframe embedding.

## Embedding sessions externally

Fermion allows you to embed live calls externally using a simple integration. This is useful if you wish to add realtime calls on your own website and do not wish to use Fermion managed LMS.

There are a few steps you need to do in order to embed a session externally.

## Step 1 - Creating a new session

The first step to embedding a session externally is to create it programmatically on Fermion.

1. You must call this API endpoint: https://docs.fermion.app/api-reference/live/create-live-session
2. Once you call this endpoint, you will get `liveEventSessionId` in response.
3. You must store this `liveEventSessionId` in your database somewhere.
4. `liveEventSessionId` allows you to control the session completely using APIs, as we will see now below.

<Tip>
	You can create sessions anytime, on the fly using API. In the API above you would see that it
	accepts a start time and duration as well, but those are only used as hints, and not enforced.
</Tip>

## Step 2 - Embedding the session on your website

Once you have obtained `liveEventSessionId`, embedding the session on your website involves two steps.

### Generating a signed JWT

A signed JWT is required for any user with any permission (host or student) to be able to participate. This token must be generated by your backend.

Here is an example of how to generate this in Node.js:

```js
// using a popular package jsonwebtoken from NPM
import jwt from 'jsonwebtoken'

const payloadObject = {
	liveEventSessionId: 'your-live-session-id',
	userId: 'unique-user-id'
}

const jwtToken = jwt.sign(payloadObject, 'FERMION_API_KEY', {
	// only required to start the playback the first time
	expiresIn: '10m'
})
```

1. `liveEventSessionId` field is the same ID that you got when you created session over API.
2. `userId` is a unique ID for a user that you're creating the playback session for. Note that it should be a stable ID. It can be anything like a database identifier or even an email address of the user. However two sessions must not be sharing same stable ID, otherwise they will be considered as a single user.

Once the token is ready, you need to embed the session.

### Embedding the live call session (Fermion SDK)

In your frontend JavaScript app, install the fermion SDK. Run one of the following depending on your package manager:

```bash
npm install @fermion-app/sdk

# or

pnpm install @fermion-app/sdk

# or

yarn install @fermion-app/sdk
```

Now, in order to get the iframe embed code, you can use fermion SDK as follows:

```js
import { FermionLivestreamVideo } from '@fermion-app/sdk/livestream-video'

// Create a livestream instance
const livestream = new FermionLivestreamVideo({
	// this must be replaced by the same live event session ID you got from API call
	liveEventSessionId: 'your-live-session-id',

	// this must be replaced by your real domain you have on fermion
	websiteHostname: 'your-domain.fermion.app'
})

// Embed the live session (requires JWT token)
const embed = livestream.getPrivateEmbedPlaybackIframeCode({
	// pass down the JWT token you created in last step
	jwtToken: 'your-jwt-token'
})

// embed this code somewhere in your HTML
// this is a string which looks like `<iframe src=....`
const iframeHtmlCode = embed.iframeHtml
```

### Embedding the live call session (Manually)

Once you have created JWT from backend, you can also embed the iframe session manually. Here is what the iframe code would be:

```html
<iframe
	width="1280"
	height="720"
	src="https://your-website.com/embed/live-session?liveEventSessionId=:your-session-id:&token=:your-jwt-token:"
	title="Video"
	frameborder="0"
	allow="allow-same-origin; camera *;microphone *;display-capture *;encrypted-media;"
	referrerpolicy="strict-origin-when-cross-origin"
	allowfullscreen
>
</iframe>
```

Please make sure to replace the following placeholders with appropirate values:

1. `your-website.com`: Domain you have with fermion
2. `:your-session-id:`: Live event session ID you got from API
3. `:your-jwt-token:`: Signing token you created in last step

## Step 3 - Assigning a primary host

When you open the webpage in browser, you'll only see a black screen and no video playing or livestream controls.

This is expected because every session, by default, **is embedded as a student-view (view-only)**. You need to add a host to the call who will be responsible for starting the session, switching students within stage/audience, conducting polls, whiteboards, etc.

You must do that using this endpoint: https://docs.fermion.app/api-reference/live/modify-live-session-user-state with the type of `update-permissions`

The API above expects you to pass:

-   User ID (same ID you created at the time of generating the JWT)
-   Updated permission level

Here's a payload to pass in the API call, that will make a given user, a host in the meeting:

```json
{
	"liveEventSessionId": ":your-session-id-here:",
	"userId": ":your-user-id-here:",
	"action": {
		"type": "update-permissions",
		"newPermissions": {
			"shouldAllowAdministrativeActions": true
		}
	}
}
```

Note that you can programmatically control more parts in the user journey (including starting the session/ending the session/adding or removing people from the call), but once you have upgraded someone to be a host, if you refresh the same embed page where you have placed your iframe earlier, you will see that the host will see controls to start the meeting.

Once the meeting is started, the host will be able to turn on camera/mic/whiteboard/screenshare, etc. and also manage students.
